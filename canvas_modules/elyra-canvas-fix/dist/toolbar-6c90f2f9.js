"use strict";var e=require("./isArrayLikeObject-694e2d20.js"),t=require("./datarecord-metadata-v3-schema-677aa8cc.js"),r=require("./createClass-826941b3.js"),n=require("./getPrototypeOf-1e698126.js"),a=require("react"),o=require("react-resize-detector"),i=require("./lib/tooltip.js"),l=require("carbon-components-react"),s=require("react-inlinesvg"),c=require("./extends-841b39ac.js"),u=require("@carbon/icons-react"),d=require("./canvas-constants-07dbe4b7.js");function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var C=f(a),h=f(o),p=f(s),v=/\s/;var b=function(e){for(var t=e.length;t--&&v.test(e.charAt(t)););return t},m=/^\s+/;var g=function(e){return e?e.slice(0,b(e)+1).replace(m,""):e},E=e.isObject_1,O=e.isSymbol_1,y=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,I=/^0o[0-7]+$/i,T=parseInt;var w=function(e){if("number"==typeof e)return e;if(O(e))return NaN;if(E(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=E(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=g(e);var r=x.test(e);return r||I.test(e)?T(e.slice(2),r?2:8):y.test(e)?NaN:+e};function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=n._getPrototypeOf(e);if(t){var o=n._getPrototypeOf(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return n._possibleConstructorReturn(this,r)}}var A=function(e){n._inherits(a,e);var t=B(a);function a(e){var o;return r._classCallCheck(this,a),(o=t.call(this,e)).actionClickHandler=o.actionClickHandler.bind(n._assertThisInitialized(o)),o}return r._createClass(a,[{key:"getDefaultIcon",value:function(e){var t=e.iconTypeOverride?e.iconTypeOverride:e.action,r=!e.enable;switch(t){case d.TOOLBAR_STOP:return C.default.createElement(u.StopFilledAlt16,{disabled:r});case d.TOOLBAR_RUN:return C.default.createElement(u.Play16,{disabled:r});case d.TOOLBAR_UNDO:return C.default.createElement(u.Undo16,{disabled:r});case d.TOOLBAR_REDO:return C.default.createElement(u.Redo16,{disabled:r});case d.TOOLBAR_CUT:return C.default.createElement(u.Cut16,{disabled:r});case d.TOOLBAR_COPY:return C.default.createElement(u.Copy16,{disabled:r});case d.TOOLBAR_PASTE:return C.default.createElement(u.Paste16,{disabled:r});case d.TOOLBAR_CREATE_AUTO_COMMENT:return C.default.createElement(u.AddComment16,{disabled:r});case d.TOOLBAR_DELETE_SELECTED_OBJECTS:return C.default.createElement(u.TrashCan16,{disabled:r});case d.TOOLBAR_ZOOM_IN:return C.default.createElement(u.ZoomIn16,{disabled:r});case d.TOOLBAR_ZOOM_OUT:return C.default.createElement(u.ZoomOut16,{disabled:r});case d.TOOLBAR_ZOOM_FIT:return C.default.createElement(p.default,{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22currentColor%22%3E%20%3Cpath%20d%3D%22M6%2C7.5h4v1H6Z%22%2F%3E%20%3Cpath%20d%3D%22M4%2C12h8a.94.94%2C0%2C0%2C0%2C1-1V5a.94.94%2C0%2C0%2C0-1-1H4A.94.94%2C0%2C0%2C0%2C3%2C5v6A.94.94%2C0%2C0%2C0%2C4%2C12ZM4%2C5h8v6H4Z%22%2F%3E%20%3Cpolygon%20points%3D%222%203.5%201%203.5%201%201%203.5%201%203.5%202%202%202%202%203.5%22%2F%3E%20%3Cpolygon%20points%3D%2215%203.5%2014%203.5%2014%202%2012.5%202%2012.5%201%2015%201%2015%203.5%22%2F%3E%20%3Cpolygon%20points%3D%2215%2015%2012.5%2015%2012.5%2014%2014%2014%2014%2012.5%2015%2012.5%2015%2015%22%2F%3E%20%3Cpolygon%20points%3D%223.5%2015%201%2015%201%2012.5%202%2012.5%202%2014%203.5%2014%203.5%2015%22%2F%3E%3C%2Fsvg%3E",disabled:r});case d.TOOLBAR_ARRANGE_HORIZONALLY:return C.default.createElement(p.default,{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Crect%20x%3D%221.5%22%20y%3D%222%22%20width%3D%2213%22%20height%3D%221%22%2F%3E%3Crect%20x%3D%221.5%22%20y%3D%2213%22%20width%3D%2213%22%20height%3D%221%22%2F%3E%3Cpath%20d%3D%22M7%2C10.5H2a.47.47%2C0%2C0%2C1-.5-.5V6A.47.47%2C0%2C0%2C1%2C2%2C5.5H7a.47.47%2C0%2C0%2C1%2C.5.5v4A.47.47%2C0%2C0%2C1%2C7%2C10.5Zm-4.5-1h4v-3h-4Z%22%2F%3E%3Cpath%20d%3D%22M14%2C10.5H9a.47.47%2C0%2C0%2C1-.5-.5V6A.47.47%2C0%2C0%2C1%2C9%2C5.5h5a.47.47%2C0%2C0%2C1%2C.5.5v4A.47.47%2C0%2C0%2C1%2C14%2C10.5Zm-4.5-1h4v-3h-4Z%22%2F%3E%3C%2Fsvg%3E",disabled:r});case d.TOOLBAR_ARRANGE_VERTICALLY:return C.default.createElement(p.default,{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Crect%20x%3D%222%22%20y%3D%221.5%22%20width%3D%221%22%20height%3D%2213%22%2F%3E%3Crect%20x%3D%2213%22%20y%3D%221.5%22%20width%3D%221%22%20height%3D%2213%22%2F%3E%3Cpath%20d%3D%22M10.5%2C7.5h-5A.47.47%2C0%2C0%2C1%2C5%2C7V3a.47.47%2C0%2C0%2C1%2C.5-.5h5A.47.47%2C0%2C0%2C1%2C11%2C3V7A.47.47%2C0%2C0%2C1%2C10.5%2C7.5ZM6%2C6.5h4v-3H6Z%22%2F%3E%3Cpath%20d%3D%22M10.5%2C13.5h-5A.47.47%2C0%2C0%2C1%2C5%2C13V9a.47.47%2C0%2C0%2C1%2C.5-.5h5A.47.47%2C0%2C0%2C1%2C11%2C9v4A.47.47%2C0%2C0%2C1%2C10.5%2C13.5ZM6%2C12.5h4v-3H6Z%22%2F%3E%3C%2Fsvg%3E",disabled:r});case d.TOOLBAR_OPEN_PALETTE:return C.default.createElement(p.default,{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2032%2032%22%20fill%3D%22currentColor%22%3E%20%3Crect%20width%3D%2232%22%20height%3D%2232%22%20fill%3D%22none%22%2F%3E%20%3Cpath%20d%3D%22M28%2C4H4A2%2C2%2C0%2C0%2C0%2C2%2C6V26a2%2C2%2C0%2C0%2C0%2C2%2C2H28a2%2C2%2C0%2C0%2C0%2C2-2V6A2%2C2%2C0%2C0%2C0%2C28%2C4Zm0%2C22H12V17.1h8.9l-2.5%2C2.5%2C1.5%2C1.5L25%2C16l-5.1-5.1-1.5%2C1.5%2C2.5%2C2.5H12V6H28Z%22%2F%3E%3C%2Fsvg%3E",disabled:r});case d.TOOLBAR_CLOSE_PALETTE:return C.default.createElement(p.default,{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2032%2032%22%20fill%3D%22currentColor%22%3E%20%3Crect%20width%3D%2232%22%20height%3D%2232%22%20fill%3D%22none%22%2F%3E%20%3Cpath%20d%3D%22M28%2C4H4A2%2C2%2C0%2C0%2C0%2C2%2C6V26a2%2C2%2C0%2C0%2C0%2C2%2C2H28a2%2C2%2C0%2C0%2C0%2C2-2V6A2%2C2%2C0%2C0%2C0%2C28%2C4Zm0%2C11H19.1l2.5-2.5L20.1%2C11%2C15%2C16l5.1%2C5.1%2C1.5-1.5-2.5-2.5H28V26H12V6H28Z%22%2F%3E%3C%2Fsvg%3E",disabled:r});case d.TOOLBAR_TOGGLE_NOTIFICATION_PANEL:return C.default.createElement(p.default,{src:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2032%2032%22%20fill%3D%22currentColor%22%3E%20%3Cpath%20d%3D%22M27%2C12V27H5V5H20V3H5A2%2C2%2C0%2C0%2C0%2C3%2C5V27a2%2C2%2C0%2C0%2C0%2C2%2C2H27a2%2C2%2C0%2C0%2C0%2C2-2V12Z%22%2F%3E%20%3Ccircle%20class%3D%22dot%22%20cx%3D%2226.5%22%20cy%3D%225.5%22%20r%3D%223.5%22%2F%3E%3C%2Fsvg%3E",disabled:r});default:return null}}},{key:"generateLabel",value:function(e,t,r,n){var a="toolbar-icon-label";return a+=this.generateLabelType(r,n),a+=t?" disabled":"",C.default.createElement("div",{className:a},e)}},{key:"generateLabelType",value:function(e,t){return e?" overflow":"before"===t?" before":"after"===t?" after":""}},{key:"generateIcon",value:function(e){var t=this.getDefaultIcon(e);if(e.iconEnabled){var r=e.iconEnabled,n=e.iconDisabled||e.iconEnabled,a=e.enable?r:n,o="toolbar-icon-"+this.props.instanceId+" -"+e.action;t="string"==typeof a?C.default.createElement(p.default,{id:o,src:a,disabled:!e.enable}):a}return t?C.default.createElement("div",{className:"toolbar-icon"},t):null}},{key:"actionClickHandler",value:function(e){this.props.toolbarActionHandler(this.props.actionObj.action,e)}},{key:"generateButton",value:function(e){var t=null,r=null;this.props.overflow?r=this.generateLabel(e.label,!e.enable,!0):"before"===e.incLabelWithIcon?t=this.generateLabel(e.label,!e.enable,!1,e.incLabelWithIcon):"after"===e.incLabelWithIcon&&(r=this.generateLabel(e.label,!e.enable,!1,e.incLabelWithIcon));var n=this.generateIcon(e),a=e.textContent?C.default.createElement("div",{className:"toolbar-text-content"}," ",e.textContent," "):null,o=c.classNames("toolbar-item-content",e.className?e.className:null,{overflow:this.props.overflow,disabled:!e.enable,default:!e.kind}),i=e.kind||"ghost",s=C.default.createElement("div",{className:o},t,n,r,a);s=this.wrapInTooltip(s);var u=e.incLabelWithIcon?null:e.label;return s=C.default.createElement(l.Button,{kind:i,onClick:this.actionClickHandler,disabled:!e.enable,onFocus:this.props.onFocus,"aria-label":u,size:this.props.size},s)}},{key:"generateActionName",value:function(e){return this.props.actionObj.action+"-action"}},{key:"wrapInTooltip",value:function(e){if(!this.props.overflow&&(this.showLabelAsTip(this.props.actionObj)||this.props.actionObj.tooltip)){var t=this.generateActionName(),r=this.props.actionObj.tooltip?this.props.actionObj.tooltip:this.props.actionObj.label,n=t+"-"+this.props.instanceId+"-tooltip",a=this.props.actionObj.enable||this.props.actionObj.jsx,o=this.props.tooltipDirection?this.props.tooltipDirection:"bottom";return C.default.createElement(i,{id:n,tip:r,disable:!a,className:"icon-tooltip",direction:o},e)}return e}},{key:"showLabelAsTip",value:function(e){return!!e.label&&("before"!==e.incLabelWithIcon&&"after"!==e.incLabelWithIcon)}},{key:"render",value:function(){var e=this.props.actionObj,t=this.generateActionName(),r=null;r=e.jsx?this.wrapInTooltip(e.jsx):this.generateButton(e);var n=!this.props.overflow||null,a=e.kind?e.kind:"default",o=c.classNames({"toolbar-overflow-menu-item":this.props.overflow,"toolbar-item":!this.props.overflow&&!e.jsx,"toolbar-jsx-item":!this.props.overflow&&e.jsx,"toolbar-overflow-jsx-item":this.props.overflow&&e.jsx,"toolbar-item-selected":e.isSelected},a,t);return C.default.createElement("div",{className:o,"data-toolbar-item":n},r)}}]),a}(C.default.Component);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=n._getPrototypeOf(e);if(t){var o=n._getPrototypeOf(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return n._possibleConstructorReturn(this,r)}}var D=function(e){n._inherits(a,e);var t=R(a);function a(e){var o;return r._classCallCheck(this,a),(o=t.call(this,e)).toggleExtendedMenu=o.toggleExtendedMenu.bind(n._assertThisInitialized(o)),o}return r._createClass(a,[{key:"toggleExtendedMenu",value:function(){this.props.toggleExtendedMenu(this.props.index)}},{key:"render",value:function(){var e=this.props.showExtendedMenu?this.props.generateExtensionMenuItems(this.props.index):[],t=this.props.showExtendedMenu?"":"toolbar-popover-list-hide",r=null;e.length>0&&(r=C.default.createElement("div",{className:"toolbar-popover-list "+t},e));var n="toolbar-spacer toolbar-index-"+this.props.index;return C.default.createElement("div",{className:n},C.default.createElement("div",{className:"toolbar-overflow-item"},C.default.createElement(l.Button,{kind:"ghost",tabIndex:-1,onClick:this.toggleExtendedMenu,onFocus:this.props.onFocus,"aria-label":this.props.label,size:this.props.size},C.default.createElement("div",{className:"toolbar-item-content default"},C.default.createElement("div",{className:"toolbar-icon"},C.default.createElement(u.OverflowMenuVertical16,null))))),r)}}]),a}(C.default.Component);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=n._getPrototypeOf(e);if(t){var o=n._getPrototypeOf(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return n._possibleConstructorReturn(this,r)}}var _=function(e){n._inherits(a,e);var t=F(a);function a(){return r._classCallCheck(this,a),t.apply(this,arguments)}return r._createClass(a,[{key:"render",value:function(){var e=this.props.overflow?"toolbar-divider-overflow":"toolbar-divider";return C.default.createElement("div",{className:e,"data-toolbar-item":!0,tabIndex:-1,"aria-hidden":!0}," ")}}]),a}(C.default.Component);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=n._getPrototypeOf(e);if(t){var o=n._getPrototypeOf(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return n._possibleConstructorReturn(this,r)}}var L=function(e){n._inherits(o,e);var a=k(o);function o(e){var t;return r._classCallCheck(this,o),(t=a.call(this,e)).state={showExtendedMenuIndex:-1},t.leftBar=[],t.rightBar=[],t.onFocus=t.onFocus.bind(n._assertThisInitialized(t)),t.onToolbarResize=t.onToolbarResize.bind(n._assertThisInitialized(t)),t.toggleExtendedMenu=t.toggleExtendedMenu.bind(n._assertThisInitialized(t)),t.generateExtensionMenuItems=t.generateExtensionMenuItems.bind(n._assertThisInitialized(t)),t}return r._createClass(o,[{key:"onFocus",value:function(){this.setLeftBarItemsTabIndex(),this.setRightBarItemsTabIndex()}},{key:"onScroll",value:function(e){e.currentTarget.scroll(0,0),e.preventDefault()}},{key:"onToolbarResize",value:function(){this.state.showExtendedMenuIndex>-1&&this.setState({showExtendedMenuIndex:-1}),this.setLeftBarItemsTabIndex(),this.setRightBarItemsTabIndex()}},{key:"setLeftBarItemsTabIndex",value:function(){var e=this.getBar("left");if(e){for(var t=e.querySelectorAll("[data-toolbar-item=true]")||[],r=this.getTopOfFirstOverflowItem(e),n=-1,a=0;a<t.length;a++){var o=t[a].getBoundingClientRect();this.setOverflowItemButtonTabIndex(a,-1,e),o.top===r?(n=a,this.setToolbarItemButtonTabIndex(t[a],0)):this.setToolbarItemButtonTabIndex(t[a],-1)}n<t.length&&this.setOverflowItemButtonTabIndex(n+1,0,e)}}},{key:"setRightBarItemsTabIndex",value:function(){for(var e=this.getRightBarItems(),t=0,r=0;r<e.length;r++){var n=e[r].getBoundingClientRect();0===r&&(t=n.top),n.top===t?this.setToolbarItemButtonTabIndex(e[r],0):this.setToolbarItemButtonTabIndex(e[r],-1)}}},{key:"getBar",value:function(e){var t=this.props.instanceId;return document.querySelector(".toolbar-div[instanceid='".concat(t,"'] > .toolbar-").concat(e,"-bar"))||[]}},{key:"getRightBarItems",value:function(){var e=this.getBar("right");return e&&e.querySelectorAll("[data-toolbar-item=true]")||[]}},{key:"getTopOfFirstOverflowItem",value:function(e){var t=this.getOverflowItem(0,e);return t?t.getBoundingClientRect().top:0}},{key:"getOverflowItem",value:function(e,t){var r="toolbar-index-"+e;return t.getElementsByClassName(r)[0]}},{key:"setToolbarItemButtonTabIndex",value:function(e,t){var r=e.querySelector("button");r&&r.setAttribute("tabindex",t)}},{key:"setOverflowItemButtonTabIndex",value:function(e,t,r){var n=this.getOverflowItem(e,r);if(n){var a=n.querySelector("button");a&&a.setAttribute("tabindex",t)}}},{key:"generateToolbarItems",value:function(e,t,r){for(var n=[],a=0;a<e.length;a++){var o=e[a];o&&(r&&!o.divider&&n.push(this.generateOverflowIcon(a)),n.push(this.generateToolbarItem(o,a,t)))}return n}},{key:"generateToolbarItem",value:function(e,t,r){var n=null;return e&&(n=e.divider?C.default.createElement(_,{key:"toolbar-item-key-"+t,overflow:r}):C.default.createElement(A,{key:"toolbar-item-key-"+t,actionObj:e,tooltipDirection:this.props.tooltipDirection,toolbarActionHandler:this.props.toolbarActionHandler,overflow:r,instanceId:this.props.instanceId,onFocus:this.onFocus,size:this.props.size})),n}},{key:"generateOverflowIcon",value:function(e){var t=this.props.additionalText?this.props.additionalText.overflowMenuLabel:"";return C.default.createElement(D,{key:"toolbar-overflow-item-key-"+e,index:e,showExtendedMenu:this.state.showExtendedMenuIndex===e,toggleExtendedMenu:this.toggleExtendedMenu,generateExtensionMenuItems:this.generateExtensionMenuItems,onFocus:this.onFocus,label:t,size:this.props.size})}},{key:"generateExtensionMenuItems",value:function(e){var t=this.generateRightOverflowItems();t.reverse();var r=this.leftBar.slice(e).concat(t);return this.generateToolbarItems(r,!0,!1)}},{key:"generateRightOverflowItems",value:function(){for(var e=[],t=this.getRightBarItems(),r=0,n=0;n<t.length;n++){var a=t[n].getBoundingClientRect();0===n&&(r=a.top),a.top!==r&&e.push(this.rightBar[n])}return e}},{key:"toggleExtendedMenu",value:function(e){var t=e===this.state.showExtendedMenuIndex?-1:e;this.setState({showExtendedMenuIndex:t})}},{key:"render",value:function(){this.leftBar=this.props.config.leftBar||[],this.rightBar=this.props.config.rightBar||[],this.rightBar=t._toConsumableArray(this.rightBar).reverse()||[];var e=this.generateToolbarItems(this.leftBar,!1,!0),r=this.generateToolbarItems(this.rightBar,!1,!1),n="sm"===this.props.size?"toolbar-div toolbar-size-small":"toolbar-div";return C.default.createElement(h.default,{handleWidth:!0,onResize:this.onToolbarResize},C.default.createElement("div",{className:n,instanceid:this.props.instanceId},C.default.createElement("div",{className:"toolbar-left-bar",onScroll:this.onScroll},e),C.default.createElement("div",{className:"toolbar-right-bar"},r)))}}]),o}(C.default.Component);exports.Toolbar=L,exports.toNumber_1=w;
//# sourceMappingURL=toolbar-6c90f2f9.js.map
