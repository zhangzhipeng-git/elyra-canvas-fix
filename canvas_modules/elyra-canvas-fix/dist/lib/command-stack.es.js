import{a as n,_ as e}from"../createClass-be661622.js";import{Stack as t,Record as o,List as s}from"immutable";var d=function(){function d(){e(this,d);var n=new o({undoCmnds:new s,redoCmnds:new t});this.rec=n()}return n(d,[{key:"do",value:function(n){this.rec=this.rec.merge({undoCmnds:this.rec.undoCmnds.push(n),redoCmnds:new t}),this.rec.undoCmnds.size>100&&(this.rec=this.rec.set("undoCmnds",this.rec.undoCmnds.shift())),n.do()}},{key:"undo",value:function(){if(this.canUndo()){var n=this.getPrevious();this.rec=this.rec.merge({undoCmnds:this.rec.undoCmnds.pop(),redoCmnds:this.rec.redoCmnds.push(n)}),n.undo()}}},{key:"redo",value:function(){if(this.canRedo()){var n=this.getNext();this.rec=this.rec.merge({undoCmnds:this.rec.undoCmnds.push(n),redoCmnds:this.rec.redoCmnds.pop()}),n.redo()}}},{key:"canUndo",value:function(){return!this.rec.undoCmnds.isEmpty()}},{key:"canRedo",value:function(){return!this.rec.redoCmnds.isEmpty()}},{key:"getPrevious",value:function(){return this.rec.undoCmnds.last()}},{key:"getNext",value:function(){return this.rec.redoCmnds.first()}},{key:"getUndoCommands",value:function(){return this.rec.undoCmnds}},{key:"getRedoCommands",value:function(){return this.rec.redoCmnds}}]),d}(),u=function(){function t(){e(this,t),this.commands=new d}return n(t,[{key:"do",value:function(n){this.commands.do(n)}},{key:"undo",value:function(){this.commands.undo()}},{key:"redo",value:function(){this.commands.redo()}},{key:"getUndoCommand",value:function(){return this.commands.canUndo()?this.commands.getPrevious():null}},{key:"getRedoCommand",value:function(){return this.commands.canRedo()?this.commands.getNext():null}},{key:"getStack",value:function(){return{undos:this.commands.getUndoCommands(),redos:this.commands.getRedoCommands()}}},{key:"canUndo",value:function(){return this.commands.canUndo()}},{key:"canRedo",value:function(){return this.commands.canRedo()}},{key:"clearCommandStack",value:function(){this.commands=new d}}]),t}();export{u as default};
//# sourceMappingURL=command-stack.es.js.map
