{"version":3,"file":"context-menu.es.js","sources":["../../src/color-picker/color-picker-panel.jsx","../../src/context-menu/common-context-menu.jsx","../../src/context-menu/context-menu-wrapper.jsx"],"sourcesContent":["/*\n * Copyright 2022 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Logger from \"../logging/canvas-logger.js\";\n\n\nclass ColorPickerPanel extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.logger = new Logger(\"CC-ContextMenu\");\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t}\n\n\tonClick(evt) {\n\t\tconst color = evt.target.dataset.color;\n\t\tthis.props.clickActionHandler(color);\n\t}\n\n\trender() {\n\t\tthis.logger.log(\"render\");\n\t\treturn (\n\t\t\t<div className=\"color-picker-panel\" onClick={this.onClick}>\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-white-0\"} className=\"color-picker-item white-0\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-yellow-20\"} className=\"color-picker-item yellow-20\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-gray-20\"} className=\"color-picker-item gray-20\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-green-20\"} className=\"color-picker-item green-20\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-teal-20\"} className=\"color-picker-item teal-20\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-cyan-20\"} className=\"color-picker-item cyan-20\" />\n\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-red-50\"} className=\"color-picker-item red-50\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-orange-40\"} className=\"color-picker-item orange-40\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-gray-50\"} className=\"color-picker-item gray-50\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-green-50\"} className=\"color-picker-item green-50\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-teal-50\"} className=\"color-picker-item teal-50\" />\n\t\t\t\t<div tabIndex=\"0\" data-color={\"bkg-col-cyan-50\"} className=\"color-picker-item cyan-50\" />\n\t\t\t</div>);\n\t}\n}\n\nColorPickerPanel.propTypes = {\n\tclickActionHandler: PropTypes.func.isRequired,\n\tcloseMenu: PropTypes.func\n};\n\nexport default ColorPickerPanel;\n","/*\n * Copyright 2017-2022 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint no-empty-function: [\"error\", { \"allow\": [\"arrowFunctions\"] }] */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { MenuItem, SubMenu } from \"react-contextmenu\";\nimport Icon from \"../icons/icon.jsx\";\nimport { CONTEXT_MENU_CARBON_ICONS } from \"../common-canvas/constants/canvas-constants\";\nimport ColorPickerPanel from \"../color-picker/color-picker-panel.jsx\";\n\n// context-menu sizing\nconst CONTEXT_MENU_WIDTH = 160; // see context-menu.css .react-context-menu margin\nconst CONTEXT_MENU_LINK_HEIGHT = 30; // see context-menu.css .react-context-menu-item height\nconst CONTEXT_MENU_DIVIDER_HEIGHT = 1; // see context-menu.css .react-context-menu-item height\nconst EXTRA_OFFSET = 5; // Extra offset for vertical menu positioning\n\n\nclass CommonContextMenu extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t\tthis.itemSelected = this.itemSelected.bind(this);\n\t\tthis.colorClicked = this.colorClicked.bind(this);\n\t}\n\n\tonContextMenu(e) {\n\t\te.preventDefault();\n\t}\n\n\titemSelected(data, selectedEvent) {\n\t\tthis.props.contextHandler(data);\n\t\t// This stops the canvasClicked function from being fired which would\n\t\t// clear any current selections.\n\t\tif (selectedEvent) {\n\t\t\tselectedEvent.stopPropagation();\n\t\t}\n\t}\n\n\tcolorClicked(color) {\n\t\tthis.props.contextHandler(\"colorSelectedObjects\", { color });\n\t}\n\n\tcalculateMenuSize(menu) {\n\t\tvar numDividers = 0;\n\t\tfor (let i = 0; i < menu.length; ++i) {\n\t\t\tconst divider = menu[i].divider;\n\t\t\tif (divider) {\n\t\t\t\tnumDividers++;\n\t\t\t}\n\t\t}\n\n\t\tvar menuSize = {\n\t\t\theight: ((menu.length - numDividers) * CONTEXT_MENU_LINK_HEIGHT) + (numDividers * CONTEXT_MENU_DIVIDER_HEIGHT),\n\t\t\twidth: CONTEXT_MENU_WIDTH\n\t\t};\n\n\t\treturn menuSize;\n\t}\n\n\t// Returns a new position and the canvas rectangle for the context menu based on the current\n\t// mouse position and whether the menu would appear outside the edges of the page.\n\tcalculateMenuPos(mousePos, menuSize, canvasRect) {\n\t\tconst menuPos = { x: mousePos.x, y: mousePos.y };\n\n\t\t// Reposition contextMenu if it will show off the bottom of the page\n\t\tif (mousePos.y + menuSize.height > canvasRect.height) {\n\t\t\tmenuPos.y = canvasRect.height - menuSize.height - EXTRA_OFFSET; // Move up by extra offset so it looks nice\n\n\t\t\t// If repositioning the menu would push it off the top of the page\n\t\t\t// (in very short browser windows) position it at the top.\n\t\t\tif (menuPos.y < 0) {\n\t\t\t\tmenuPos.y = 0;\n\t\t\t}\n\t\t}\n\n\t\t// Reposition contextMenu if it will show off the right of the page\n\t\tif (mousePos.x + menuSize.width > canvasRect.width) {\n\t\t\tmenuPos.x -= menuSize.width;\n\t\t}\n\n\t\t// Add a pixel to x and y because on Chrome without this the context menu\n\t\t// appears with  the top corner of the first menu item under the mouse\n\t\t// cursor. This highlights the first menu item (which looks weird) and, if\n\t\t// the first item is a cascade menu, automatically opens the sub-menu.\n\t\tmenuPos.x += 1;\n\t\tmenuPos.y += 1;\n\n\t\treturn menuPos;\n\t}\n\n\tareAllSubmenuItemsDisabled(submenuItems) {\n\t\tlet itemCount = 0;\n\t\tlet disabledCount = 0;\n\t\tsubmenuItems.forEach(function(submenuItem) {\n\t\t\tif (!submenuItem.divider) {\n\t\t\t\titemCount++;\n\t\t\t}\n\t\t\tif (submenuItem.enable === false) {\n\t\t\t\tdisabledCount++;\n\t\t\t}\n\t\t});\n\t\treturn disabledCount === itemCount;\n\t}\n\n\tbuildMenu(menuDefinition, menuSize, menuPos, canvasRect) {\n\t\tconst customDivider = {\n\t\t\tclassName: \"contextmenu-divider\"\n\t\t};\n\n\t\tconst menuItems = [];\n\n\t\tlet runningYPos = 0;\n\t\t// Records if we have just displayed a divider. This is useful because we\n\t\t// only want to display one divider if there is a divider element\n\t\t// immediately after another divider element in the menuDefintion array.\n\t\tlet previousDivider = false;\n\n\t\tfor (let i = 0; i < menuDefinition.length; ++i) {\n\t\t\tconst divider = menuDefinition[i].divider;\n\t\t\tconst submenu = menuDefinition[i].submenu;\n\n\t\t\tif (divider) {\n\t\t\t\tif (!previousDivider) {\n\t\t\t\t\tmenuItems.push(<MenuItem attributes={customDivider} key={i + 1} onClick={() => {}} divider />);\n\t\t\t\t\trunningYPos += CONTEXT_MENU_DIVIDER_HEIGHT;\n\t\t\t\t\tpreviousDivider = true;\n\t\t\t\t}\n\n\t\t\t} else if (submenu) {\n\t\t\t\tpreviousDivider = false;\n\t\t\t\tif (menuDefinition[i].menu === \"colorPicker\") {\n\t\t\t\t\tconst disabled = false;\n\t\t\t\t\tconst subMenuSize = { width: CONTEXT_MENU_WIDTH, height: 50 };\n\t\t\t\t\tconst subMenuContent = this.buildColorPickerPanel();\n\n\t\t\t\t\tconst subMenu = this.buildSubMenu(\n\t\t\t\t\t\tmenuDefinition, i, subMenuContent, runningYPos, menuPos, menuSize, subMenuSize, canvasRect, disabled);\n\t\t\t\t\tmenuItems.push(subMenu);\n\n\t\t\t\t\trunningYPos += CONTEXT_MENU_LINK_HEIGHT;\n\n\t\t\t\t} else {\n\t\t\t\t\tconst disabled = { disabled: this.areAllSubmenuItemsDisabled(menuDefinition[i].menu) };\n\t\t\t\t\tconst subMenuSize = this.calculateMenuSize(menuDefinition[i].menu);\n\t\t\t\t\tconst subMenuContent = this.buildMenu(menuDefinition[i].menu, menuSize, menuPos, canvasRect);\n\n\t\t\t\t\tconst subMenu = this.buildSubMenu(\n\t\t\t\t\t\tmenuDefinition, i, subMenuContent, runningYPos, menuPos, menuSize, subMenuSize, canvasRect, disabled);\n\t\t\t\t\tmenuItems.push(subMenu);\n\n\t\t\t\t\trunningYPos += CONTEXT_MENU_LINK_HEIGHT;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tpreviousDivider = false;\n\t\t\t\tconst disabled = { disabled: menuDefinition[i].enable === false };\n\t\t\t\tmenuItems.push(\n\t\t\t\t\t<MenuItem onClick={this.itemSelected.bind(null, menuDefinition[i].action)} key={i + 1} {...disabled}>\n\t\t\t\t\t\t{menuDefinition[i].label}\n\t\t\t\t\t</MenuItem>\n\t\t\t\t);\n\t\t\t\trunningYPos += CONTEXT_MENU_LINK_HEIGHT;\n\t\t\t}\n\t\t}\n\t\treturn menuItems;\n\t}\n\n\tbuildColorPickerPanel() {\n\t\treturn (\n\t\t\t<ColorPickerPanel clickActionHandler={this.colorPickHandler} clickActionHandler={this.colorClicked} />\n\t\t);\n\t}\n\n\tbuildSubMenu(menuDefinition, index, subMenuContent, runningYPos, menuPos,\n\t\tmenuSize, subMenuSize, canvasRect, disabled) {\n\t\tconst rtl = this.buildRtlState(menuPos, menuSize, subMenuSize, canvasRect);\n\t\tconst subMenuPosStyle = this.buildSubMenuPosStyle(runningYPos, menuPos, subMenuSize, canvasRect);\n\n\t\tconst icon = <Icon type={CONTEXT_MENU_CARBON_ICONS.CHEVRONARROWS.RIGHT} disabled={false} className={\"react-contextmenu-submenu-icon\"} />;\n\t\tconst menuItem = <div>{menuDefinition[index].label}{icon} </div>;\n\n\t\treturn (\n\t\t\t<SubMenu title={menuItem} key={index + 1} className=\"contextmenu-submenu\" rtl={rtl} {...disabled}>\n\t\t\t\t<div key={index + 1} style={subMenuPosStyle} className=\"context-menu-popover\">\n\t\t\t\t\t{subMenuContent}\n\t\t\t\t</div>\n\t\t\t</SubMenu>\n\t\t);\n\t}\n\n\t// Returns a boolean to indicate whether the submenu should appear on the\n\t// right of the context menu (rtl === false) or on the left of the context\n\t// menu (rtl === true).\n\tbuildRtlState(menuPos, menuSize, subMenuSize, canvasRect) {\n\t\t// Ensure that the combined menu position, plus the menu width,\n\t\t//  plus the submenu width, does not exceed the viewport bounds.\n\t\treturn (menuPos.x + menuSize.width + subMenuSize.width > canvasRect.right);\n\n\t}\n\n\t// Returns a style object that can be applied to the sub-menu to adjust\n\t// its vertical (y) position. This may be necessary if the submenu is tall\n\t// enough that it would be displayed off the bottom of the canvas area.\n\tbuildSubMenuPosStyle(runningYPos, menuPos, subMenuSize, canvasRect) {\n\t\t// Does the submenu go below the bottom of the viewport?\n\t\tconst y = canvasRect.bottom - (menuPos.y + runningYPos + subMenuSize.height);\n\n\t\t// If submenu is not below the viewport bottom set offset to 0 so the\n\t\t// submenu will not be moved. Otherwise, y will be used to move the\n\t\t// submenu up fully into the view port.\n\t\tconst offset = (y > 0) ? 0 : y - EXTRA_OFFSET;\n\n\t\tconst subMenuPosStyle = {\n\t\t\ttop: offset + \"px\" // Use negative to push the menu up\n\t\t};\n\t\treturn subMenuPosStyle;\n\t}\n\n\trender() {\n\t\t// Reposition contextMenu so that it does not show off the screen\n\t\tconst menuSize = this.calculateMenuSize(this.props.menuDefinition);\n\t\tconst menuPos = this.calculateMenuPos(this.props.mousePos, menuSize, this.props.canvasRect);\n\t\tconst posStyle = {\n\t\t\tleft: menuPos.x + \"px\",\n\t\t\ttop: menuPos.y + \"px\"\n\t\t};\n\n\t\tconst menuItems = this.buildMenu(this.props.menuDefinition, menuSize, menuPos, this.props.canvasRect);\n\n\t\treturn (\n\t\t\t<div id=\"context-menu-popover\" className=\"context-menu-popover\" style={posStyle} onContextMenu={this.onContextMenu}>\n\t\t\t\t{menuItems}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nCommonContextMenu.propTypes = {\n\tcontextHandler: PropTypes.func.isRequired,\n\tmenuDefinition: PropTypes.array.isRequired,\n\tcanvasRect: PropTypes.object.isRequired,\n\tmousePos: PropTypes.object.isRequired\n};\n\nexport default CommonContextMenu;\n","/*\n * Copyright 2017-2022 Elyra Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport CommonContextMenu from \"./common-context-menu.jsx\";\n\nexport default class ContextMenuWrapper extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\n\t\tthis.contextMenuClicked = this.contextMenuClicked.bind(this);\n\t\tthis.handleClickOutside = this.handleClickOutside.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener(\"click\", this.handleClickOutside, true);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener(\"click\", this.handleClickOutside, true);\n\t}\n\n\t// Returns an object that describes the dimensions of a rectangle for the\n\t// canvas div with coordinates based on the top left corner of the div. This\n\t// will match the coordinates for the mouse position where the user clicked,\n\t// which is specified in this.props.contextMenuPos object.\n\tgetCanvasRect() {\n\t\tconst containingDiv = document.getElementById(this.props.containingDivId);\n\t\tconst clientRect = containingDiv.getBoundingClientRect();\n\t\tconst canvasRect = {\n\t\t\ttop: 0,\n\t\t\tbottom: clientRect.bottom - clientRect.top,\n\t\t\tleft: 0,\n\t\t\tright: clientRect.right - clientRect.left,\n\t\t\theight: clientRect.height,\n\t\t\twidth: clientRect.width\n\t\t};\n\n\t\treturn canvasRect;\n\t}\n\n\thandleClickOutside(e) {\n\t\t// On Safari, when a user is displaying the context menu with a ctrl-click\n\t\t// (which is a supported context menu gesture on the Mac) a secondary click\n\t\t// event is emmitted which is received here with the ctrlKey field enabled.\n\t\t// So we ignore that event otherwse, if we continue, the context menu will\n\t\t// be closed.\n\t\tif (e.ctrlKey) {\n\t\t\te.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\t// If the click was anywhere outside the context menu and\n\t\t// the ellipsis button we just close the menu.\n\t\tif (!this.isOverContextMenu(e) && !this.isOverEllipsisButton(e)) {\n\t\t\t// This stop propagation is needed in common canvas so that selected nodes will\n\t\t\t// remain selected even after clicking outside the context menu to close the menu.\n\t\t\tif (this.props.stopPropagation) {\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\tthis.props.closeContextMenu();\n\t\t}\n\t}\n\n\t// Retruns true if the event occurred over the context menu.\n\tisOverContextMenu(e) {\n\t\tconst domNode = document.getElementById(\"context-menu-popover\");\n\t\treturn !domNode || domNode.contains(e.target);\n\t}\n\n\t// Returns true if the event occurred over the ellipsis button. Typically\n\t// there will be only one ellipsis button on the canvas, since they are only\n\t// displayed on hover, but in some test cicumstances there might be more\n\t// than one.\n\tisOverEllipsisButton(e) {\n\t\tconst ellipsisNodes = document.getElementsByClassName(\"d3-node-ellipsis-group\");\n\t\tlet state = false;\n\t\tfor (let i = 0; i < ellipsisNodes.length; i++) {\n\t\t\tif (state === false && ellipsisNodes[i].contains(e.target)) {\n\t\t\t\tstate = true;\n\t\t\t}\n\t\t}\n\t\treturn state;\n\t}\n\n\tcontextMenuClicked(action, param) {\n\t\tthis.props.contextMenuActionHandler(action, param);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<CommonContextMenu\n\t\t\t\tcontextHandler={this.contextMenuClicked}\n\t\t\t\tmenuDefinition={this.props.contextMenuDef}\n\t\t\t\tcanvasRect={this.getCanvasRect()}\n\t\t\t\tmousePos={this.props.contextMenuPos}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nContextMenuWrapper.propTypes = {\n\tcontextMenuDef: PropTypes.array.isRequired,\n\tcontainingDivId: PropTypes.string.isRequired,\n\tcontextMenuPos: PropTypes.object.isRequired,\n\tcontextMenuActionHandler: PropTypes.func.isRequired,\n\tcloseContextMenu: PropTypes.func.isRequired,\n\tstopPropagation: PropTypes.bool\n};\n"],"names":["_React$Component","_inherits","ColorPickerPanel","_super","_createSuper","props","_this","_classCallCheck","call","logger","Logger","onClick","bind","_assertThisInitialized","_createClass","key","value","evt","color","target","dataset","this","clickActionHandler","log","React","createElement","className","tabIndex","Component","CommonContextMenu","state","itemSelected","colorClicked","e","preventDefault","data","selectedEvent","contextHandler","stopPropagation","menu","numDividers","i","length","divider","height","width","mousePos","menuSize","canvasRect","menuPos","x","y","submenuItems","itemCount","disabledCount","forEach","submenuItem","enable","menuDefinition","customDivider","menuItems","runningYPos","previousDivider","submenu","push","MenuItem","attributes","subMenuSize","subMenuContent","buildColorPickerPanel","subMenu","buildSubMenu","disabled","areAllSubmenuItemsDisabled","calculateMenuSize","buildMenu","_extends","action","label","_defineProperty","colorPickHandler","index","rtl","buildRtlState","subMenuPosStyle","buildSubMenuPosStyle","icon","Icon","type","CONTEXT_MENU_CARBON_ICONS","CHEVRONARROWS","RIGHT","menuItem","SubMenu","title","style","right","bottom","top","calculateMenuPos","posStyle","left","id","onContextMenu","ContextMenuWrapper","contextMenuClicked","handleClickOutside","document","addEventListener","removeEventListener","clientRect","getElementById","containingDivId","getBoundingClientRect","ctrlKey","isOverContextMenu","isOverEllipsisButton","closeContextMenu","domNode","contains","ellipsisNodes","getElementsByClassName","param","contextMenuActionHandler","contextMenuDef","getCanvasRect","contextMenuPos"],"mappings":"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"}