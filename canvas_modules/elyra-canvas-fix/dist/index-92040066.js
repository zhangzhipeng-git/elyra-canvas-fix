"use strict";var e=require("./createClass-826941b3.js"),t=require("./getPrototypeOf-1e698126.js"),r=require("./isArrayLikeObject-694e2d20.js"),n=require("./flexible-table-86768b1c.js"),a=require("./_baseForOwn-306b61ba.js"),i=require("react"),s=require("uuid"),o=require("./lib/tooltip.js"),l=require("react-intl"),u=require("carbon-components-react"),c=require("./extends-841b39ac.js"),f=require("./canvas-constants-07dbe4b7.js"),p=require("./en-7cc24212.js"),d=require("./icon-f6f2bffc.js"),E=require("@carbon/icons-react");function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=h(i);function y(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=t._getPrototypeOf(e);if(r){var i=t._getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return t._possibleConstructorReturn(this,n)}}var T=function(r){t._inherits(i,r);var a=y(i);function i(){return e._classCallCheck(this,i),a.apply(this,arguments)}return e._createClass(i,[{key:"render",value:function(){var e,t,r=void 0===this.props.applyLabel?this.props.intl.formatMessage({id:"propertiesEdit.applyButton.label",defaultMessage:n.defaultMessages["propertiesEdit.applyButton.label"]}):this.props.applyLabel,a=void 0===this.props.rejectLabel?this.props.intl.formatMessage({id:"propertiesEdit.rejectButton.label",defaultMessage:n.defaultMessages["propertiesEdit.rejectButton.label"]}):this.props.rejectLabel;return this.props.cancelHandler&&(e=m.default.createElement(u.Button,{"data-id":"properties-cancel-button",className:"properties-cancel-button",type:"button",size:"small",kind:"secondary",onClick:this.props.cancelHandler},a)),this.props.okHandler&&(t=m.default.createElement(u.Button,{"data-id":"properties-apply-button",className:"properties-apply-button",type:"button",size:"small",onClick:this.props.okHandler,disabled:!this.props.applyButtonEnabled},r)),this.props.okHandler||this.props.cancelHandler?m.default.createElement("div",{className:c.classNames("properties-modal-buttons",{hide:void 0!==this.props.showPropertiesButtons&&!this.props.showPropertiesButtons})},e,t):null}}]),i}(i.Component);T.defaultProps={applyButtonEnabled:!0};var v=l.injectIntl(T),b=r._baseIsEqual;var S=function(e,t){return b(e,t)},A={TEXT:"text",ENUM:"enum",COLUMN:"column",NEW_COLUMN:"new_column",EXPRESSION:"expression",EMAIL:"email",URL:"url",COLOR:"color",INTERVAL_YEAR:"interval_year",INTERVAL_DAY:"interval_day",INTERVAL_SECOND:"interval_second",CUSTOM:"custom",UNSPECIFIED:""},_=r.isArrayLike_1;var g=function(e,t){return function(r,n){if(null==r)return r;if(!_(r))return e(r,n);for(var a=r.length,i=t?a:-1,s=Object(r);(t?i--:++i<a)&&!1!==n(s[i],i,s););return r}}(a._baseForOwn),N=g,I=r.isArrayLike_1;var L=function(e,t){var r=-1,n=I(e)?Array(e.length):[];return N(e,(function(e,a,i){n[++r]=t(e,a,i)})),n};var O=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e},C=r.isSymbol_1;var R=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,a=e==e,i=C(e),s=void 0!==t,o=null===t,l=t==t,u=C(t);if(!o&&!u&&!i&&e>t||i&&s&&l&&!o&&!u||n&&s&&l||!r&&l||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||o&&r&&a||!s&&a||!l)return-1}return 0};var P=function(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,s=a.length,o=r.length;++n<s;){var l=R(a[n],i[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index},M=r._arrayMap,D=r._baseGet,x=n._baseIteratee,k=L,F=O,B=r._baseUnary,j=P,w=r.identity_1,U=r.isArray_1;var Y=function(e,t,r){t=t.length?M(t,(function(e){return U(e)?function(t){return D(t,1===e.length?e[0]:e)}:e})):[w];var n=-1;t=M(t,B(x));var a=k(e,(function(e,r,a){return{criteria:M(t,(function(t){return t(e)})),index:++n,value:e}}));return F(a,(function(e,t){return j(e,t,r)}))},G=r.eq_1,K=r.isArrayLike_1,q=r._isIndex,H=r.isObject_1;var z=function(e,t,r){if(!H(r))return!1;var n=typeof t;return!!("number"==n?K(r)&&q(t,r.length):"string"==n&&t in r)&&G(r[t],e)},V=r._baseFlatten,X=Y,W=r._baseRest,$=z,Z=W((function(e,t){if(null==e)return[];var r=t.length;return r>1&&$(e,t[0],t[1])?t=[]:r>2&&$(t[0],t[1],t[2])&&(t=[t[0]]),X(e,V(t,1),[])})),J=r._baseGetTag,Q=r.isArray_1,ee=r.isObjectLike_1;var te=function(e){return"string"==typeof e||!Q(e)&&ee(e)&&"[object String]"==J(e)};var re=function(e){return void 0===e},ne={};function ae(e,t,r){var n="",a="",i="";return r&&(n=r+": "),t&&(t.lineNumber&&(a="(line "+t.lineNumber+"): "),i=t.message?t.message:"Message unavailable"),"["+e+"]: "+n+a+i}ne.debug=function(e,t){console.log(ae("DEBUG",t,e))},ne.info=function(e,t){console.log(ae("INFO",t,e))},ne.warn=function(e,t){console.warn(ae("WARNING",t,e))},ne.error=function(e,t){console.error(ae("ERROR",t,e))};var ie=ne;function se(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){f._defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function fe(e,t,r){var a,i=ue(ue({},n.defaultMessages),p.defaultMessages2);if(null!=e){if(""===e.messages[t])return"";a=e.formatMessage({id:t,defaultMessage:i[t]},r)}else a=i[t];return a}function pe(e,t){return isNaN(e)?t.getPropertyValue({name:e.trim()}):parseFloat(e)}function de(e){if(e)if(e.subControls){for(var t=0;t<e.subControls.length;t++)if(e.subControls[t].role===A.COLUMN)return t}else if(e.role===A.COLUMN)return 0;return-1}function Ee(e){var t=e.toLowerCase();return"Real"===e&&(t="double"),t}function he(e,t,r){return"object"===ce(e)?t&&t.valueDef&&e.link_ref?r?e.field_name:e.link_ref+"."+e.field_name:null:e}function me(e,t,r){var n,a=e.find((function(e){return e.origName===t}));switch(r){case"measure":if(!a)return c.CARBON_ICONS.MEASUREMENTS.EMPTY;switch(a.metadata.measure){case"range":n=c.CARBON_ICONS.MEASUREMENTS.SCALE;break;case"ordered_set":n=c.CARBON_ICONS.MEASUREMENTS.ORDINAL;break;case"discrete":n=c.CARBON_ICONS.MEASUREMENTS.DISCRETE;break;case"set":case"collection":case"geospatial":n=c.CARBON_ICONS.MEASUREMENTS.NOMINAL;break;case"flag":n=c.CARBON_ICONS.MEASUREMENTS.FLAG;break;default:n=c.CARBON_ICONS.MEASUREMENTS.EMPTY}break;case"type":if(!a)return"typeEmpty";switch(a.type){case c.DATA_TYPE.DATE:n=c.DATA_TYPE.DATE;break;case c.DATA_TYPE.TIME:n=c.DATA_TYPE.TIME;break;case c.DATA_TYPE.TIMESTAMP:n=c.DATA_TYPE.TIMESTAMP;break;case c.DATA_TYPE.STRING:n=c.DATA_TYPE.STRING;break;case c.DATA_TYPE.INTEGER:n=c.DATA_TYPE.INTEGER;break;case c.DATA_TYPE.DOUBLE:n=c.DATA_TYPE.DOUBLE;break;default:n="typeEmpty"}}return n}function ye(e,t){var r=t.indexOf(e);if(r>-1)return t[r];var n,a=e.toLowerCase(),i=se(t);try{for(i.s();!(n=i.n()).done;){var s=n.value;if(a===s.toLowerCase())return s}}catch(e){i.e(e)}finally{i.f()}var o,l=se(t);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(a.startsWith(u.substring(0,6).toLowerCase()))return u}}catch(e){l.e(e)}finally{l.f()}return e}function Te(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=t._getPrototypeOf(e);if(r){var i=t._getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return t._possibleConstructorReturn(this,n)}}var ve=function(n){t._inherits(i,n);var a=Te(i);function i(){return e._classCallCheck(this,i),a.apply(this,arguments)}return e._createClass(i,[{key:"render",value:function(){var t=this.props.tooltipText;"object"!==e._typeof(this.props.tooltipText)&&(t=String(this.props.tooltipText));var n=m.default.createElement("div",{className:"properties-tooltips"},t);return m.default.createElement("div",{className:"properties-truncated-tooltip"},m.default.createElement(o,{id:"".concat(s.v4(),"-properties"),tip:n,direction:"bottom",className:"properties-tooltips",disable:!r.has_1(this.props,"disabled")||this.props.disabled,showToolTipIfTruncated:!0},this.props.content))}}]),i}(m.default.Component),be=ve;function Se(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _e(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=t._getPrototypeOf(e);if(r){var i=t._getPrototypeOf(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return t._possibleConstructorReturn(this,n)}}var ge=function(a){t._inherits(l,a);var i=_e(l);function l(r){var n;return e._classCallCheck(this,l),(n=i.call(this,r)).state={fields:n.props.fields,origFields:n.props.fields,filterIcons:[],filterText:"",selectedFields:n.props.currentFields},n.multiSchema=r.controller.getDatasetMetadataSchemas()&&r.controller.getDatasetMetadataSchemas().length>1,n.filterList=[],n.filterType=n.filterType.bind(t._assertThisInitialized(n)),n.getTableData=n.getTableData.bind(t._assertThisInitialized(n)),n.getVisibleData=n.getVisibleData.bind(t._assertThisInitialized(n)),n.handleSave=n.handleSave.bind(t._assertThisInitialized(n)),n.handleCancel=n.handleCancel.bind(t._assertThisInitialized(n)),n.handleReset=n.handleReset.bind(t._assertThisInitialized(n)),n.getNewSelections=n.getNewSelections.bind(t._assertThisInitialized(n)),n.onSort=n.onSort.bind(t._assertThisInitialized(n)),n.onFilter=n.onFilter.bind(t._assertThisInitialized(n)),n.updateFieldSelections=n.updateFieldSelections.bind(t._assertThisInitialized(n)),n.filterList=n.getAvailableFilters(),n}return e._createClass(l,[{key:"onFilter",value:function(e){this.setState({filterText:e})}},{key:"onSort",value:function(e){var t=Array.from(this.state.fields);t=Z(t,(function(t){switch(e.column){case"fieldName":return t.origName;case"dataType":return t.type;case"schemaName":return t.schema;default:return null}})),e.direction===c.SORT_DIRECTION.DESC&&t.reverse(),this.setState({fields:t})}},{key:"getAvailableFilters",value:function(){var e=[];for(var t in c.DATA_TYPE)if(r.has_1(c.DATA_TYPE,t)){var n,a=c.DATA_TYPE[t],i=Se(this.props.fields);try{for(i.s();!(n=i.n()).done;){var s=n.value;if(a===s.type){var o,l={type:s.type},u=!1,f=Se(e);try{for(f.s();!(o=f.n()).done;){if(o.value.type===l.type){u=!0;break}}}catch(e){f.e(e)}finally{f.f()}u||e.push(l);break}}}catch(e){i.e(e)}finally{i.f()}}return e}},{key:"getTableData",value:function(){for(var e=this.getVisibleData(),t=[],r=this.state.selectedFields,n=[],a=function(t){var a=e.findIndex((function(e){return e.name===r[t]}));-1!==a&&n.push(a)},i=0;i<r.length;i++)a(i);for(var s=0;s<e.length;s++){var o=e[s],l=[],u=null;if(this.props.dmIcon&&"type"!==this.props.dmIcon){var c=me(this.props.controller.getDatasetMetadataFields(),o.origName,this.props.dmIcon),f=c?m.default.createElement(d.Icon,{type:c}):null;f&&(u=m.default.createElement("div",{className:"properties-fp-field-type-icon"},f))}var p=m.default.createElement("span",{className:"properties-fp-field-name"},o.origName),E=m.default.createElement(be,{content:p,tooltipText:o.origName,disabled:!1}),h=m.default.createElement("div",{className:"properties-fp-field"},u,E);if(l.push({column:"fieldName",content:h,fieldName:o.origName}),this.multiSchema){var y=m.default.createElement("div",{className:"properties-fp-schema"},o.schema);l.push({column:"schemaName",content:y})}l.push({column:"dataType",content:m.default.createElement("div",{className:"properties-fp-data"},m.default.createElement("div",{className:"properties-fp-data-type-icon"},m.default.createElement(d.Icon,{type:o.type})),m.default.createElement("div",{className:"properties-fp-field-type"},o.type)),value:o.type}),t.push({className:"properties-fp-data-rows",columns:l})}return this.selectedRowsIndex=n,t}},{key:"getVisibleData",value:function(){var e=this;return this.state.fields.filter((function(t){return e.state.filterIcons.indexOf(t.type)<0})).filter((function(t){return void 0===e.state.filterText||null===e.state.filterText||t.origName.toLowerCase().indexOf(e.state.filterText.toLowerCase())>-1}))}},{key:"getNewSelections",value:function(){var e=[],t=this.props.currentFields;if(this.state.selectedFields)for(var r=0;r<this.state.selectedFields.length;r++)(null==t||t.indexOf(this.state.selectedFields[r])<0)&&e.push(r);return e}},{key:"handleSave",value:function(){this.props.closeFieldPicker(this.state.selectedFields,this.getNewSelections())}},{key:"handleCancel",value:function(){this.handleReset(),this.props.closeFieldPicker()}},{key:"updateFieldSelections",value:function(e){var t=this.getVisibleData(),r=Array.from(this.state.selectedFields),n=r.filter((function(e,n,a){return-1===t.findIndex((function(e){return e.name===r[n]}))}));e.forEach((function(e){n.push(t[e].name)})),n=Array.from(new Set(n)),this.setState({selectedFields:n})}},{key:"isFieldInList",value:function(e,t){return e.some((function(e){return e.name===t}))}},{key:"handleReset",value:function(){this.setState({selectedFields:this.props.currentFields,filterIcons:[],filterText:""})}},{key:"filterType",value:function(e){var t=e.currentTarget.getAttribute("data-type"),r=Array.from(this.state.filterIcons),n=r.indexOf(t);n<0?r.push(t):r.splice(n,1),this.setState({filterIcons:r})}},{key:"_genBackButton",value:function(){var e=fe(this.props.controller.getReactIntl(),c.MESSAGE_KEYS.APPLYBUTTON_LABEL),t=fe(this.props.controller.getReactIntl(),c.MESSAGE_KEYS.REJECTBUTTON_LABEL);return this.props.rightFlyout||(e=fe(this.props.controller.getReactIntl(),c.MESSAGE_KEYS.FIELDPICKER_SAVEBUTTON_MODAL_LABEL)),m.default.createElement(v,{okHandler:this.handleSave,cancelHandler:this.handleCancel,showPropertiesButtons:!0,applyLabel:e,rejectLabel:t})}},{key:"_genResetButton",value:function(){var e=fe(this.props.controller.getReactIntl(),c.MESSAGE_KEYS.FIELDPICKER_RESETBUTTON_LABEL);return m.default.createElement(u.Button,{className:"properties-fp-reset-button-container",onClick:this.handleReset,renderIcon:E.Reset24,iconDescription:e,size:"small",kind:"ghost"},m.default.createElement("span",null,e))}},{key:"_genFilterTypes",value:function(){var e=this,t=fe(this.props.controller.getReactIntl(),c.MESSAGE_KEYS.FIELDPICKER_FILTER_LABEL),n=this.filterList.map((function(n,a){for(var i=!0,l=0;l<e.state.filterIcons.length;l++)if(n.type===e.state.filterIcons[l]){i=!1;break}var f=s.v4()+"-tooltip-filters-"+a,p=fe(e.props.controller.getReactIntl(),c.MESSAGE_KEYS["FIELDPICKER_".concat(n.type.toUpperCase(),"_LABEL")]),E=m.default.createElement("div",{className:"properties-tooltips"},p);return m.default.createElement("li",{key:"filters"+a,className:"properties-fp-filter-list-li"},m.default.createElement("div",{className:"properties-tooltips-filter"},m.default.createElement(o,{id:f,tip:E,direction:"bottom",className:"properties-tooltips icon-tooltip",disable:r.isEmpty_1(n.type)},m.default.createElement(u.Button,{className:"properties-fp-filter","data-type":n.type,onClick:e.filterType.bind(e),"aria-label":t+" "+n.type,kind:"ghost"},m.default.createElement(d.Icon,{type:n.type,disabled:!i})))))}));return m.default.createElement("ul",{className:"properties-fp-filter-list"},m.default.createElement("li",{className:"properties-fp-filter-list-title properties-fp-filter-list-li"},t),n)}},{key:"_genTable",value:function(){var e=fe(this.props.controller.getReactIntl(),c.MESSAGE_KEYS.FIELDPICKER_FIELDCOLUMN_LABEL),t=fe(this.props.controller.getReactIntl(),c.MESSAGE_KEYS.FIELDPICKER_SCHEMACOLUMN_LABEL),r=fe(this.props.controller.getReactIntl(),c.MESSAGE_KEYS.FIELDPICKER_DATATYPECOLUMN_LABEL),a=[];a.push({key:"fieldName",label:e}),this.multiSchema&&a.push({key:"schemaName",label:t}),a.push({key:"dataType",label:r});var i=this.getTableData();return m.default.createElement(n.FlexibleTable,{className:"properties-fp-table",sortable:["fieldName","schemaName","dataType"],filterable:["fieldName"],onFilter:this.onFilter,columns:a,data:i,onSort:this.onSort,filterKeyword:this.state.filterText,scrollKey:"field-picker",noAutoSize:!0,tableLabel:this.props.title?this.props.title:"",selectedRows:this.selectedRowsIndex,updateRowSelections:this.updateFieldSelections,rowSelection:c.ROW_SELECTION.MULTIPLE,light:this.props.controller.getLight()&&!this.props.controller.isTearsheetContainer()})}},{key:"render",value:function(){var e=this._genBackButton(),t=this._genResetButton(),r=this._genFilterTypes(),n=this._genTable();return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"properties-fp-top-row"},r,t),n,e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!S(e.fields,t.origFields)){var r=t.selectedFields;return e.currentFields&&(S(Object.keys(e.currentFields),Object.keys(t.selectedFields))||(r=e.currentFields)),{fields:e.fields,selectedFields:r,origFields:e.fields}}return{}}}]),l}(m.default.Component),Ne=ge;exports.ControlType={CUSTOM:"custom",TEXTFIELD:"textfield",PASSWORDFIELD:"passwordfield",TEXTAREA:"textarea",LIST:"list",EXPRESSION:"expression",NUMBERFIELD:"numberfield",DATEFIELD:"datefield",TIMEFIELD:"timefield",TIMESTAMP:"timestampfield",CHECKBOX:"checkbox",TOGGLE:"toggle",RADIOSET:"radioset",CHECKBOXSET:"checkboxset",ONEOFSELECT:"oneofselect",MULTISELECT:"multiselect",SOMEOFSELECT:"someofselect",SELECTCOLUMN:"selectcolumn",SELECTCOLUMNS:"selectcolumns",SELECTSCHEMA:"selectschema",STRUCTURETABLE:"structuretable",STRUCTUREEDITOR:"structureeditor",STRUCTURELISTEDITOR:"structurelisteditor",TOGGLETEXT:"toggletext",READONLY:"readonly",READONLYTABLE:"readonlyTable",SPINNER:"spinner",CODE:"code",HIDDEN:"hidden"},exports.EditStyle={INLINE:"inline",SUBPANEL:"subpanel",ON_PANEL:"on_panel"},exports.FieldPicker=Ne,exports.GroupType={CONTROLS:"controls",TABS:"tabs",SUB_TABS:"subTabs",PANELS:"panels",ADDITIONAL:"additional",COLUMN_SELECTION:"columnSelection",PANEL_SELECTOR:"panelSelector",CUSTOM_PANEL:"customPanel",SUMMARY_PANEL:"summaryPanel",ACTION_PANEL:"actionPanel",TEXT_PANEL:"textPanel",TWISTY_PANEL:"twistyPanel",COLUMN_PANEL:"columnPanel",TEARSHEET_PANEL:"tearsheetPanel"},exports.ItemType={CONTROL:"control",ADDITIONAL_LINK:"additionalLink",STATIC_TEXT:"staticText",HORIZONTAL_SEPARATOR:"hSeparator",PANEL:"panel",TEARSHEET:"tearsheet",SUB_TABS:"subTabs",PRIMARY_TABS:"primaryTabs",PANEL_SELECTOR:"panelSelector",CUSTOM_PANEL:"customPanel",ACTION:"action",TEXT_PANEL:"textPanel"},exports.ORIENTATIONS={VERTICAL:"vertical",HORIZONTAL:"horizontal"},exports.PanelType={GENERAL:"general",COLUMN_SELECTION:"columnSelection",CUSTOM:"custom",SUMMARY:"summary",ACTION_PANEL:"actionPanel",TWISTY_PANEL:"twisty",COLUMN_PANEL:"column",TEARSHEET:"tearsheet"},exports.ParamRole=A,exports.PropertiesButtons=v,exports.Separator={BEFORE:"before",AFTER:"after"},exports.Size={MAX:"max",LARGE:"large",MEDIUM:"medium",SMALL:"small"},exports.TruncatedContentTooltip=be,exports.Type={BOOLEAN:"boolean",INTEGER:"integer",LONG:"long",DOUBLE:"double",STRING:"string",PASSWORD:"password",DATE:"date",TIME:"time",TIMESTAMP:"timestamp",STRUCTURE:"structure",OBJECT:"object"},exports._baseEach=g,exports._isIterateeCall=z,exports.convertArrayStructureToObject=function e(t,r,n,a){var i=[];if(r.forEach((function(e){i.push(e.name)})),t&&Array.isArray(n)){var s=[];return n.forEach((function(t,n){if(a){var o={};i.forEach((function(n,a){r[a].structureType&&"object"===r[a].structureType?o[n]=e(r[a].valueDef.isList,r[a].subControls,t[a],!0):void 0!==r.subControls?o[n]=e(r[a].valueDef.isList,r[a].subControls,t[a],!1):o[n]=void 0!==t[a]?t[a]:null})),s.push(o)}else{var l=[];t.forEach((function(t,n){var a=t;r[n].structureType&&"object"===r[n].structureType&&(a=e(r[n].valueDef.isList,r[n].subControls,t,!0)),l.push(a)})),s.push(l)}})),s}var o={};return i.forEach((function(e,t){o[e]=n&&void 0!==n[t]?n[t]:null})),o},exports.convertInputDataModel=function(e){var t={fields:[]};if(e&&e.columns){var r,n=se(e.columns);try{for(n.s();!(r=n.n()).done;){var a=r.value,i={};i.name=a.name,i.type=Ee(a.storage),i.metadata={},i.metadata.description="",a.measure&&(i.metadata.measure=a.measure.toLowerCase()),a.modelingRole&&(i.metadata.modeling_role=a.modelingRole.toLowerCase()),t.fields.push(i)}}catch(e){n.e(e)}finally{n.f()}}return t},exports.convertObjectStructureToArray=function t(r,n,a){var i=[];if(n.forEach((function(e){i.push(e.name)})),r){var s=[];return"object"===e._typeof(a)&&null!==a&&Object.keys(a).length>0&&a.forEach((function(r){if(Array.isArray(r)){var a=[];r.forEach((function(r,i){var s=r;"object"===e._typeof(r)&&null!==r&&Object.keys(r).length>0&&(s=t(n[i].valueDef.isList,n[i].subControls,r)),a.push(s)})),s.push(a)}else if("object"===e._typeof(r)){var o=[];i.forEach((function(e,a){var i=void 0!==r[e]?r[e]:null;n[a].structureType&&"object"===n[a].structureType&&(i=t(n[a].valueDef.isList,n[a].subControls,r[e])),o.push(i)})),s.push(o)}})),s}var o=[];return i.forEach((function(e,t){var r=void 0!==a[e]?a[e]:null;o.push(r)})),o},exports.convertValueDataTypes=function(e,t){var r={};return t.forEach((function(t){if(!re(e[t.name])){var n=e[t.name];if(n)switch(t.type){case"string":r[t.name]=n.toString();break;case"integer":r[t.name]=parseInt(n,10);break;case"double":r[t.name]=parseFloat(n);break;case"boolean":te(n)?r[t.name]="true"===n:r[t.name]=Boolean(n);break;default:r[t.name]=n}else r[t.name]=n}})),r},exports.copy=function(e){return void 0!==e?p.cloneDeep_1(e):e},exports.evaluateText=function e(t,r){try{if(!t)return t;var n=t.indexOf("${");if(n<0)return t;var a=t.substr(n+2).indexOf("}");if(a<0)return t;var i=t.substr(n+2,a),s=t.replace("${"+i+"}",function(e,t){var r,n,a=e.indexOf("("),i=e.substr(0,a),s=e.slice(a+1,-1).split(",");if(0===s.length)return"";switch(i){case"percent":return!(n=pe(s[0],t))||isNaN(n)?0:(r=100/n,s.length>1&&(r=r.toFixed(parseInt(s[1],10))),r);case"sum":r=0;var o,l=se(s);try{for(l.s();!(o=l.n()).done;){n=pe(o.value,t),isNaN(n)||(r+=n)}}catch(e){l.e(e)}finally{l.f()}return r}return""}(i,r));return e(s,r)}catch(e){return ie.warn("Invalid expression.  Make sure replacement expression in text is a valid expression."),t}},exports.fieldStringToValue=function(e,t,r){if("column"===t.role&&"structure"===t.valueDef.propType){var n,a=se(r.getDatasetMetadataFields());try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.name===e)return{link_ref:i.schema,field_name:i.origName}}}catch(e){a.e(e)}finally{a.f()}}return e},exports.fieldValueMatchesProto=function(e,t){return"object"===ce(e)&&e.link_ref?e.link_ref===t.schema&&e.field_name===t.origName:e===t.name},exports.formatMessage=fe,exports.generateId=function(){return"properties-"+s.v4()},exports.getDMDefault=function(e,t,r){var n,a=e.dmDefault;if(t){var i,s=se(r);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(o.name===t){switch(a){case"type":n=o.type;break;case"description":n=o.metadata.description;break;case"measure":n=ye(o.metadata.measure,e.values);break;case"modeling_role":n=ye(o.metadata.modeling_role,e.values)}break}}}catch(e){s.e(e)}finally{s.f()}}return n},exports.getDMFieldIcon=me,exports.getFieldsFromControlValues=function(e,t,r){var n=de(e),a=[];if(t&&-1!==n){var i,s=se(t);try{for(s.s();!(i=s.n()).done;){var o=i.value,l=o;Array.isArray(o)?l=he(o[n],e):"object"===ce(o)&&(l=he(o,e)),a.push(l)}}catch(e){s.e(e)}finally{s.f()}}return a},exports.getTableFieldIndex=de,exports.isEqual_1=S,exports.isString_1=te,exports.isSubControlStructureObjectType=function e(t){if(t){if(t.structureType&&"object"===t.structureType)return!0;if(t.subControls){var r,n=se(t.subControls);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.structureType&&"object"===a.structureType)return!0;if(a.subControls&&e(a))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}}return!1},exports.isUndefined_1=re,exports.logger=ie,exports.sortBy_1=Z,exports.stringifyFieldValue=he,exports.toType=ce;
//# sourceMappingURL=index-92040066.js.map
